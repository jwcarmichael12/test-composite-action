name: 'Test Composite Action'
description: 'Figure out how this works'
inputs:
  component:
    description: 'Component Name/ID'
    required: true
  versionname:
    description: 'Component Version Name'
    required: true
  description:
    description: 'Component version description'
    required: false
  link:
    description: 'URL to add to component version'
    required: false
  base:
    description: 'Local base directory containing files to upload if file upload is required'
    required: false
  offset:
    description: 'Target path offset (the directory in the version files to which these files should be added)'
    required: false
  include:
    description: 'An include file pattern for selecting files to add (may be repeated)'
    required: false
  exclude:
    description: 'An exclude file pattern for excluding files (may be repeated). Overrides includes.'
    required: false
  saveExecuteBits:
    description: 'Saves execute bits for files.'
    required: true
    type: boolean
    default: false
  hostname:
    description: 'DevOps Deploy hostname'
    required: true
  port:
    description: 'port'
    required: true
    default: '8443'
  username:
    description: 'username'
    required: false
  password:
    description: 'password'
    required: false
    secret: true
  authToken:
    description: 'DevOps Deploy authentication token'
    required: false
    secret: true
  disableSSLVerification:
    description: 'skip SSL certificate validation when making HTTPS requests and this is discouraged'
    required: true
    type: boolean
    default: false
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v4
      with:
        repository: jwcarmichael12/test-composite-action
        sparse-checkout: |
          artifacts/devops-deploy-client.zip
        sparse-checkout-cone-mode: false
        path: tools
    - uses: actions/setup-java@v4
      with:
        distribution: 'adopt-openj9' # See 'Supported distributions' for available options
        java-version: '11'
    - name: install udclient
      id: udclient-install
      run: ls -la &ls -la tools&unzip tools/artifacts/devops-deploy-client.zip&ls -la tools/artifacts
      shell: bash
    - name: run udclient
      id: udclient-run
      run: udclient/udclient createVersion -component ${( inputs.component }} -name ${{ inputs.versionname }}
      shell: bash
      env:
        DS_WEB_URL: https://${{ inputs.hostname }}:${{ inputs.port }}
        DS_AUTH_TOKEN: ${{ inputs.authtoken }}
        
